<!DOCTYPE html>
<html>
<head>
    <title>Basic Query Cyclop</title>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.4.0/css/bulma.min.css">
    <script src="../../dist/cyclop.js"></script>
</head>
<body>

<section class="hero is-info">
  <div class="hero-body">
    <div class="container">
      <h1 class="title">
        Hello CyClop
      </h1>
    </div>
  </div>
</section>

<div class="container">
  <table class="table">
    <thead>
      <tr>
        <th><abbr title="Position">No</abbr></th>
        <th><abbr title="Played">Name</abbr></th>
        <th><abbr title="Won">Price</abbr></th>
        <th><abbr title="Drawn">Category</abbr></th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <th>1</th>
        <td><a href="https://en.wikipedia.org/wiki/Leicester_City_F.C." title="Leicester City F.C.">Leicester City</a> <strong>(C)</strong>
        </td>
        <td>38</td>
        <td>23</td>
      </tr>
      <tr>
        <th>1</th>
        <td><a href="https://en.wikipedia.org/wiki/Leicester_City_F.C." title="Leicester City F.C.">Leicester City</a> <strong>(C)</strong>
        </td>
        <td>38</td>
        <td>23</td>
      </tr>
    </tbody>
  </table>
</div>

<script type="text/javascript">
  var client = new Cyclop.ConnectionGraphql({
    url: "http://localhost:3000/graphql",
    headers: ""
  });

  var queryDoc = `query {
    getProducts {
      _id
      name
      price
      category
    }
  }`

  var queryPrice = `query {
    getProductByPrice(price: $price) {
      _id
      name
      price
      category
    }
  }`

  var mutateDoc = `
    mutation {
      addProduct(
        name: $name,
        price: $price,
        category: $category
      ) {
        _id
        name
        price
        category
      }
  }`

  var variables = [{
    price: 2000
  }]

  client.query(queryDoc).then(function(response){
    var {data, errors} = response;
    if (errors) {
    }
    console.log(data)
  });

  client.query(queryPrice, variables).then(function(response){
    var {data, errors} = response;
    if (errors) {
    }
    console.log(data)
  });
</script>

</body>
</html>